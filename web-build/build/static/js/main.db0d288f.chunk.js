(this["webpackJsonpreact-karaoke-challenge"]=this["webpackJsonpreact-karaoke-challenge"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var r=n(5),i=n(1),a=n(17),s=n.n(a),c=(n(85),n(86),n(22)),o=n(24),l=n(26),u=n(25),d=(n(87),n(48)),h=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"Header",children:[Object(r.jsx)("div",{style:{fontWeight:900},children:"AFRICARIYOKI -"}),Object(r.jsx)("div",{className:"right-part",children:Object(r.jsx)(d.b,{variant:"outlined",style:{marginRight:20,fontSize:18},color:"primary",to:"/africariyoki/upload",children:"Upload"})})]})}}]),n}(i.Component),p=n(44),f=(i.Component,function(e){return Object(r.jsxs)("tr",{className:"song",children:[Object(r.jsx)("td",{children:e.song.title}),Object(r.jsx)("td",{children:e.song.singer}),Object(r.jsx)("td",{children:Object(r.jsx)("button",{onClick:function(){return e.playSong(e.song.id)},children:"Play"})})]})}),j=function(e){return Object(r.jsx)("table",{className:"song-list",children:Object(r.jsx)("tbody",{children:e.songs.map((function(t){return Object(r.jsx)(f,{song:t,playSong:e.playSong},t.id)}))})})},y=n(35),g=n(36),m=new function e(){Object(c.a)(this,e),this.getLyrics=function(){return new Promise((function(e){g.a.database().ref("/lyrics/").once("value").then((function(t){t.val()?e(Object.values(t.val())):e({})}))}))},this.storage=function(){return g.a.storage()},this.deleteRecp=function(e,t){return new Promise((function(n){g.a.database().ref("/recipients/"+e).child(t).remove().then((function(){n(!0)}))}))},this.addAfricariyoki=function(e){return new Promise((function(t){g.a.database().ref("/lyrics/"+e.id+"/").set(Object(y.a)({id:e.id,title:e.title,lyricsurl:e.lyricsurl,singer:e.singer,audiourl:e.audiourl},"title",e.title)).then((function(e){t(!0)})).catch((function(e){console.warn("error",e)}))}))},this.postTransaction=function(e,t,n,r){return new Promise((function(i){g.a.database().ref("/userTransactions/"+e.user.uid+"/"+r.id+"/").set({transactionId:r.id,accountNumber:t.accountNumber,bankName:t.bankName,recpFirstName:t.firstName,recpLastName:t.lastName,cardUsed:n.number,recpAmt:r.recpAmt,sendAmt:r.sendAmt,recpCurrency:r.recpCurrency,sendCurrency:r.sendCurrency,rate:r.rate,isSuccessful:!0,time:"13:03"}).then((function(e){i(!0)})).catch((function(e){console.warn("error",e)}))}))}},b=n(148),O=n(69),v=n.n(O),x=n(149),S=(n(98),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).filterSong=function(e){var t=r.state.songs.filter((function(t){return e===t.title.toLowerCase()}));""==e||0==t.length?r.setState({songs:r.state.songsCopy}):r.setState({songs:t})},r.playSong=function(e){var t=r.state.songs.filter((function(t){return e===t.id}));r.props.history.push({pathname:"/africariyoki/karaokedisplay/"+e,state:{chooseSong:t}}),r.setState({songs:t,currentSong:t})},r.state={songs:[],filteredSongs:"",currentSong:"",songsCopy:[],animatedTexts:["if","onyeka onyewu","jowo","lala","ginger","monsters you made","jollof on the jet","beef","hustle","pepper soup"],count:0},r.searchTerm="",r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;m.getLyrics().then((function(t){e.setState({songs:t,songsCopy:t})})),setInterval((function(){e.setState({count:(e.state.count+1)%10})}),4e3)}},{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{className:"Searcher-container",children:Object(r.jsxs)("div",{className:"Searcher-container",children:[Object(r.jsx)(x.a,{id:"controllable-states-demo",value:this.searchTerm,options:this.state.animatedTexts.slice(0,5),renderInput:function(e){return Object(r.jsx)(b.a,Object(p.a)(Object(p.a)({},e),{},{className:"Searcher-input",label:"what do you want to do today??",variant:"outlined"}))},onInputChange:function(t,n){e.searchTerm=n},onChange:function(t,n){e.searchTerm=n,e.filterSong(n)},onKeyUp:function(t){"Enter"===t.key&&(e.filterSong(e.searchTerm),console.log(document),document.getElementsByClassName("MuiAutocomplete-popper").hide())}}),Object(r.jsx)(j,{songs:this.state.songs,filteredSongs:this.state.filteredSongs,playSong:this.playSong}),Object(r.jsx)(v.a,{style:{marginTop:50,fontSize:24,color:"#3F51B5"},text:this.state.animatedTexts[this.state.count],speed:150,eraseDelay:150,typingDelay:150})]})})}}]),n}(i.Component));n(100);function k(e){return e?e.split("\n").reduce((function(e,t){return(e=e.concat(t.split(" "))).push("\n"),e}),[]):[]}var N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).playLyrics=function(){i.setState({timer:setInterval(i.nextWord,i.props.speed)})},i.stopTimer=function(){i.timer&&clearInterval(i.timer)},i.stopLyrics=function(){i.stopTimer(),i.setState({timer:null})},i.nextWord=function(){i.state.currentWord<=i.state.lyricsArray.length?i.setState((function(e){return{currentWord:e.currentWord+1}})):i.state.finished||i.setState({finished:!0},(function(){i.props.onFinish&&i.props.onFinish()}))},i.renderHighlightedLyrics=function(){var e=document.querySelector(".unhighlighted"),t=document.querySelector(".highlight");t&&t.offsetHeight>=i.scrollThreshold&&(i.scrollThreshold+=500,e.scrollIntoView());var n=i.state,a=n.lyricsArray,s=n.currentWord;return 0===s?null:Object(r.jsxs)("span",{className:"highlight",children:[" ",a.slice(0,s).join(" ")]})},i.renderRemainingLyrics=function(){var e=i.state,t=e.lyricsArray;e.currentWord;return Object(r.jsxs)("span",{className:"unhighlighted",children:[Object(r.jsx)("span",{className:"unhiglited-first",children:t.slice(0,t.length/2).join(" ")}),Object(r.jsx)("span",{className:"unhiglited-sec",children:t.slice(t.length/2,-1).join(" ")})]})},i.state={lyricsurl:e.lyricsurl,lyrics:null,lyricsArray:null,currentWord:0,timer:null,finished:!0},i.scrollThreshold=500,i}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(this.state.lyricsurl){fetch(this.state.lyricsurl,{method:"GET",redirect:"follow"}).then((function(e){return e.text()})).then((function(t){for(var n="",r="",i=0;i<t.length;i++)"\\"==t[i]?(n+=" \n ",r="t"):"t"==r?n+=t[i+1]:(n+=t[i],r="");e.setState({lyricsArray:k(n.replace('b"',""))})})).catch((function(e){return console.log("error",e)}))}}},{key:"shouldComponentUpdate",value:function(e,t){return t.currentWord<=t.lyricsArray.length}},{key:"componentWillUnmount",value:function(){this.stopTimer()}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"lyrics",children:Object(r.jsxs)("pre",{className:"lyrics-container",children:[this.renderHighlightedLyrics()," ",this.renderRemainingLyrics()]})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.lyrics!==t.lyrics?Object(p.a)(Object(p.a)({},t),{},{lyrics:e.lyrics,lyricsArray:k(e.lyrics),currentWord:0,finished:!e.lyrics}):null}}]),n}(i.Component);N.defaultProps={speed:300};var C=N,w=(n(101),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={singer:e.props.location.state.chooseSong[0]},e}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return window.onload=function(e){var t=document.getElementById("audioPlay");console.log("myAudio",t.duration),t&&t.duration>0&&t.paused&&alert("music paused")},this.props?Object(r.jsxs)("div",{className:"KaraokeDisplay-container",children:[Object(r.jsxs)("audio",{id:"audioPlay",className:"KaraokeDisplay-audio",controls:!0,autoPlay:!0,children:[Object(r.jsx)("source",{src:this.state.singer.audiourl,type:"audio/mpeg"}),"Your browser does not support the audio element."]}),Object(r.jsxs)("h2",{children:[this.state.singer.title," by ",this.state.singer.singer]}),Object(r.jsx)(C,{lyricsurl:this.state.singer.lyricsurl})]}):Object(r.jsxs)("div",{className:"KaraokeDisplay-display",children:[Object(r.jsx)("h2",{children:"Song Title"}),Object(r.jsx)(C,{lyrics:"example song lyrics"})]})}}]),n}(i.Component)),I=n(150),T=n(71),A=n.n(T),D=n(147),P=(n(102),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={albumName:"",singer:"",title:"",lyrics:"",videoID:"",isUploading:!1,progress:0},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"uploadToFirebase",value:function(){if(""!=this.state.videoID){var e,t="https://storage.googleapis.com/africariyoki.appspot.com/music/".concat(this.state.videoID,".mp3"),n="https://storage.googleapis.com/africariyoki.appspot.com/lyrics/".concat(this.state.videoID,".txt");m.addAfricariyoki((e={title:this.state.title,singer:this.state.singer},Object(y.a)(e,"title",this.state.title),Object(y.a)(e,"audiourl",t),Object(y.a)(e,"lyricsurl",n),Object(y.a)(e,"id",this.state.videoID),e));var r={method:"GET",redirect:"follow"};fetch("http://0.0.0.0:5000/vr/".concat(this.state.videoID),r).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}));r={method:"POST",headers:{"Content-Type":"text/plain"},body:this.state.lyrics,redirect:"follow"};fetch("http://0.0.0.0:5000/lyrics/".concat(this.state.videoID),r).then((function(e){return e.text()})).then((function(e){return console.log(e)})).catch((function(e){return console.log("error",e)}))}}},{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{style:{height:"100%"},children:Object(r.jsx)("div",{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(r.jsxs)("div",{style:{width:320,padding:30,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[Object(r.jsx)(I.a,{style:{marginBottom:10},children:Object(r.jsx)(A.a,{})}),Object(r.jsxs)("div",{style:{marginBottom:20,fontSize:24,textAlign:"center"},children:[" ","Upload song information"," "]}),Object(r.jsx)(b.a,{value:this.state.title,placeholder:"Song title",onChange:function(t){e.setState({title:t.target.value})}}),Object(r.jsx)(b.a,{value:this.state.singer,placeholder:"Singer",onChange:function(t){e.setState({singer:t.target.value})}}),Object(r.jsx)(b.a,{value:this.state.albumName,placeholder:"Album",onChange:function(t){e.setState({albumName:t.target.value})}}),Object(r.jsx)(b.a,{value:this.state.videoID,placeholder:"Youtube Video ID",onChange:function(t){e.setState({videoID:t.target.value})}}),Object(r.jsx)(b.a,{style:{height:100},value:this.state.lyrics,placeholder:"Lyrics - paste lyrics here",multiline:!0,rows:4,onChange:function(t){e.setState({lyrics:t.target.value})}}),Object(r.jsx)(D.a,{style:{marginTop:20,width:200},variant:"outlined",color:"primary",onClick:function(){e.uploadToFirebase()},children:"Upload"}),this.state.wrongCred&&Object(r.jsx)("div",{style:{color:"red"},children:this.state.SignUpErrorMsg})]})})})}}]),n}(i.Component)),U=n(18),W=(n(107),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"app",children:[Object(r.jsx)(h,{}),Object(r.jsx)("div",{className:"app-body",children:Object(r.jsx)("div",{className:"content",children:Object(r.jsxs)(U.c,{children:[Object(r.jsx)(U.a,{path:"/africariyoki",exact:!0,component:S}),Object(r.jsx)(U.a,{path:"/africariyoki/karaokedisplay/:id",exact:!0,component:w}),Object(r.jsx)(U.a,{path:"/africariyoki/upload",exact:!0,component:P}),Object(r.jsx)(U.a,{component:function(){return Object(r.jsx)("div",{style:{padding:20},children:"Page not found"})}})]})})})]})}}]),n}(i.Component)),L={apiKey:"AIzaSyDyuKXjNCV1RowCqeWyAfffk0EJPPe2Vjg",authDomain:"africariyoki.firebaseapp.com",databaseURL:"https://africariyoki-default-rtdb.firebaseio.com",projectId:"africariyoki",storageBucket:"africariyoki.appspot.com",messagingSenderId:"477946568761",appId:"1:477946568761:web:bdc8f1110f36abdc732de8",measurementId:"G-FQ0NXKV2ED"};g.a.apps.length||g.a.initializeApp(L);var E=Object(r.jsx)(d.a,{children:Object(r.jsx)(W,{})});window.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__=!0,s.a.render(E,document.getElementById("root"))},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},98:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.db0d288f.chunk.js.map